########
# 1oom #
########

1. Options
===========

The configuration options:
    --enable-static         enable static builds (experimental)
    --enable-modebug        add debugging options
    --enable-fault-finding  enables picky compiler mode
    --without-readline      do not try to use the readline library
                            (used by 1oom_cmdline)
    --without-samplerate    do not try to use libsamplerate
    --disable-tools         disables extra tools
    --disable-uiclassic     disables classic UI
                            (do not build 1oom_classic_*)
    --disable-uicmdline     disables cmdline UI
                            (do not build 1oom_cmdline)
    --enable-hwsdl1         enables SDL1 HW
                            (build 1oom_*_sdl1)
    --disable-hwsdl2        disables SDL2 HW
                            (do not build 1oom_*_sdl2)
    --disable-hwalleg4      disables Allegro 4 HW
                            (do not build 1oom_*_alleg4)

Parameters for configure:
    CFLAGS
    SDL1_CFLAGS
    SDL1_LIBS
    SDL1MIXER_LIBS
    SDL2_CFLAGS
    SDL2_LIBS
    SDL2MIXER_LIBS


2. Quick guide
===============

You'll need make, a C99 compiler and SDL2 development libraries.
    aptitude install libsdl2-dev libsdl2-mixer-dev

For better audio quality, also get libsamplerate.
    aptitude install libsamplerate-dev

OpenGL libraries are highly recommended.

If you checked this out with git, do this first:
    autoreconf -fi

Make a build directory:
    mkdir build-native
    cd build-native

Then the usual:
    ../configure && make -j 3

!!! You need the data files from the original Master of Orion to run 1oom. !!!

Actual install step is not needed:
    src/1oom_classic_sdl1 -data /path/to/moo
    src/1oom_classic_sdl2 -data /path/to/moo

The install step can still be done:
    make install


3. Cross-compiling
===================

This is a quick guide to cross compile a MSDOS binary.

First, build and configure the DJGPP/Allegro4 environment:
https://github.com/1oom-fork/allegro4

Edit your .bashrc, .profile or equivalent and add/edit:
    export PATH="/<djgpp_path>/bin:$PATH"
Run the export line on the current terminal to set the PATH for this session.

Now to cross compile 1oom:
    cd ~/path/to/1oom
    mkdir build-msdos
    cd build-msdos
    ../configure --host=i586-pc-msdosdjgpp && make -j 3


4. Building distributable packages
===================================

Build a tarball requiring no Autotools:
    make dist

Some OS targets support building binary distributions. The bindist scripts
use git for version information if .git/ exists, otherwise the version is
"vUnknown". Files from extrabindist_common/ and extrabindist_$OS/ are copied
to the distribution.

Build a binary distribution:
    make -j 3 && make bindist

Build a binary distribution zip:
    make -j 3 && make bindistzip
